# 机关

`02_Machinery`

## 弹门

`M_BallDamper` `M_BallDamperDestructible`

::: warning

Do not scale it.

:::

阻挡纸球、冰球、橡胶球、木球的通过。

Properties:

- 两扇门均为刚体，绕 `Y` 轴转动
- 偏离初始位置时会产生恢复力，大小正比于偏离角度
- 可破坏弹门在临界位置会被限位，施加足够的力打破限位即可破坏，破坏后的弹门失去恢复力
- 任何物体获得足够的速度均可能穿过或破坏弹门。**（并非判断球种）**
  参见：[《峰山金渊》通关视频](https://www.bilibili.com/video/BV1sD4y1U7Jx?t=60) 1:00
- 小冰球可以高速冲撞弹门后从门缝钻过。**请勿有意利用此性质**
  参见：[《迷惑》通关视频](https://www.bilibili.com/video/BV1fC4y1s78A?t=175) 2:55

## 秋千

`M_BallVessel`

也称为摇篮。

::: warning

Do not scale it.

秋千在地外场景无法正常工作，不会自行开始摆动，受扰开始摆动后一侧高度显著高于另一侧；在宇宙场景会静止。这两个场景中请谨慎使用秋千。以下部分性质只对常规重力场景适用。

参见：[《幽》通关视频](https://www.bilibili.com/video/BV1EE41137Ag?t=250) 4:10

:::

Properties:

- Rigid body, can rotate along `X` axis
- 在 `yOz` 平面内自动摆动，周期约为 2.6 秒，`Z` 轴正向摆幅大于负向
- 可被玩家球或各种物体阻碍

## 磁铁

`M_BarMagnet` `M_UMagnet`

::: danger

该元件会引起严重的性能问题，请避免大量使用。

:::

会吸引玩家钢球和磁球。

Properties:

- Fixed object
- Stay to trigger
- 不吸引道具钢球
- 磁心位于刷漆部分中心
- 磁力与到磁极的距离为固定关系，4 格以内逐渐减小为零，以外迅速增大趋于无穷，至 7.5 格附近**会导致游戏崩溃**
- 磁力作用范围为 4 格，磁铁缩放时，该范围随三轴缩放参数的最大值改变。由于上述引发崩溃的原因，**请勿将任一缩放参数设定为 1.8 以上**
- 各个磁极的施力分别计算，遵从向量合成法则

## 木箱

`M_Box`

Properties:

- Rigid body, can move freely
- 重心略低于体心。~~你猜里面是不是藏了只小蘑菇~~

## 传送带

`M_Conveyor*`

为上方元件提供 7g/18 的加速度。

Properties:

- Fixed object
- Stay to trigger
- 反面没有助推效果
- 加速度不受缩放影响
- 物体受到多个传送带作用时，受到的加速度遵循向量合成法则
- 除钢球外的所有玩家球均可水平逆行单层传送带
- **阻止**玩家球水平逆行最少需要的传送带层数：纸球(4)，橡胶球(3)，木球(3)，冰球(2)，石球(2)，发光球(2)，钢球(1)。但由于玩家无法辨识传送带层数，**一般情况请勿叠加使用**
- 竖直抬升玩家球最少需要 3 层传送带

## 单向门

`M_DirectionalDoor`

阻止物体反向通过。

Properties:

- Fixed object
- Stay to trigger
- 物体正向通过时，在门内会受到**持续**的推进力；如果有其它物体阻碍，可能卡在门内，且无法退出。**请勿有意利用此性质**
  参见：[《口语挑战 2：拥挤的单向门》通关视频](https://www.bilibili.com/video/BV1oo4y1f7HA?p=1)
- 正反向均会阻挡激光

## 落板

`M_FallDownBoard`

常根据颜色称为蓝板。

受到接触时，一定时间后便会自由下落。

Properties:

- Fixed object
- Enter to trigger
- 当任何刚体接触落板时，0.5 秒后落板变为刚体，可自由移动
- 变为刚体后，若先前穿模入其它物体，会被强制弹出。**请勿有意利用此性质**

## 风扇

`M_Fan`

Properties:

- Fixed object
- Stay to trigger
- 吹起玩家球需要的风扇数量：纸球(1)，冰球(2)，橡胶球(4)，木球(5)，石球(26)，发光球(26)，钢球(39)
- 深渊场景可用于降温
- 可加速可恢复耐久（浅蓝条）的恢复
- 缩放不改变风力
- 风口外 5 格范围内会阻挡激光，风扇沿 `Y` 轴缩放时，该范围随之改变
- 上述范围内，第 1 至 4 格为吹力，更远区域为吸力；若缩放后作用范围不足 4 格，则没有吸力。**请勿有意利用此性质**

## 强力风扇

`M_FanPowerful`

常根据底座材质称为木风扇。

Properties:

- Fixed object
- Stay to trigger
- 吹起玩家球需要的风扇数量：纸球(1)，冰球(1)，橡胶球(1)，木球(1)，石球(5)，发光球(5)，钢球(7)
- 深渊场景可用于降温
- 可加速可恢复耐久（浅蓝条）的恢复
- 缩放不改变风力
- 风口外 6 格范围内会阻挡激光，风扇沿 `Y` 轴缩放时，该范围随之改变
- 上述范围内，第 1 至 5 格为吹力，更远区域为吸力；若缩放后作用范围不足 5 格，则没有吸力。**请勿有意利用此性质**
  参见：[《巨人国·序》通关视频](https://www.bilibili.com/video/BV14E411W7i6?t=85) 1:25
  参见：[《噫请勿屮》通关视频](https://www.bilibili.com/video/BV1QK4y1Q76v?t=60) 1:00

::: details 来自 Sigmoid 的数据测算

- 玩家球质量(kg)：纸球(1.8)，冰球(7)，橡胶球(13)，木球(19)，发光球(100)，石球(100)，钢球(150)
- 常见道具质量(kg)：纸球(1)，冰球(10)，橡胶球(10)，木球(19)，发光球(72)，石球(100)，钢球(120)，木箱(20)，木桶(20)，TNT(20)，落石(27)，磁球(30)，落板(50)
- 恒力源(N)：风扇(70)，强力风扇(400)，激光(300)
- 恒加速度源(m·s<sup>-2</sup>)：常规场景(18)，地外(5)，恒加速度场(9)，传送带(7)

:::

## 旋转喷火器

`M_FlamethrowerRotate`

Properties:

- Kinematics object, 自动绕 `Y` 轴顺时针转动，转速为 75deg/s
- 其它参见[定向喷火器](#定向喷火器)

## 定向喷火器

`M_FlamethrowerStatic`

能使玩家球升温，点燃纸球或木球，熔化冰球。

Properties:

- Fixed object
- 冰球遇到火焰时会被熔化，同时快速损失耐久，温度不会上升。_可以利用恒温阶段避免点燃。_**请勿有意利用此性质**
  参见：[《霞影逃亡》通关视频](https://www.bilibili.com/video/BV1U5411W717?t=40) 0:40
- 其它球遇到火焰时，先快速损失可恢复耐久（浅蓝条），再迅速升温。_可以借助浅蓝条避免点燃。_**请勿有意利用此性质**
  参见：[《口语挑战 13：救火》通关视频](https://www.bilibili.com/video/BV19y4y1x7rU)
- 温度最高时，纸球和木球点燃并快速损失耐久，其它球不受影响。_钢球烧至通红只有视觉效果_
- 满温度条（包括点燃）的球必定引爆 TNT，并能获得更大的推力
- 若受到多个火焰同时作用，效果会叠加
  参见：[《雪夜环线：冰球竞速》通关视频](https://www.bilibili.com/video/BV1fA41157yi?t=15) 0:15
- 火焰在夜间**没有**照明效果。~~拉瓦锡震怒~~

## 浮板

`M_FloatBoard`

常根据颜色称为绿板。

离开初始位置时，会像弹簧一样提供恢复力。

Properties:

- Rigid body, 可沿**全局竖直方向**平动，**方向与浮板姿态无关**
- 高于或低于初始位置时都会产生恢复力，大小正比于与初始位置的距离
- 由于自身重力影响，平衡位置并非初始位置，需要在游戏中调试高度

## 跳板

`M_JumpBoard`

常根据颜色称为红板。

受到接触时，会弹起并提供推力。

Properties:

- Kinematics object, 可沿**全局竖直方向**平动
- 带冷却的停留时扳机
- 扳机区域为正面刷红漆区域上方的长方体区域
- 触发时**竖直向上**弹起一定高度，**方向与跳板姿态无关**；1 秒后落回原位
  参见：[《地球之外 2》通关视频](https://www.bilibili.com/video/BV1CC4y1p7Fd?t=305) 5:05
- 两次弹起间的冷却时间为 2 秒
- 缩放跳板不改变弹起高度，进而不影响对跳板上物体的推力

## 弹跳盒

`M_JumpBox`

当物体边缘接触到弹跳盒时，会获得额外速度。

弹跳盒带有力度参数 `jumpForce`，附加的速度与该参数的平方成正比。

Properties:

- Fixed object
- Enter to trigger
- 若作用后物体未离开弹跳盒，在其离开弹跳盒前不会再次作用

## 激光

`M_Laser`

能提供一定推力，杀死纸球，点燃木球，使冰球以外的球种快速损失耐久。

Properties:

- Fixed object
- 激光推力沿光路方向，作用点为物体质心
- 同一物体受到多束激光照射时，受力遵从向量合成法则
- 玩家球受到多束激光照射时，受到的伤害叠加
- 激光造成的伤害属于可恢复耐久（浅蓝条）。_不包括木球被点燃损失的耐久_
- 激光不会引爆 TNT。_但被推到撞墙还是会炸的。_**请勿有意利用此性质**
- 木球在水池中不会被激光点燃
- 激光可以在水中传播，也可以自由入水出水
- 激光会穿透冰球、道具冰球和冰管道。_但是会被冰块（已被移除）和冰球变球器自带的冰块阻挡_
- 激光遇到除**钢球变球器**外的所有钢质物体会反射。_护栏、路灯、磁铁是事故多发地_
- 激光会被补给物和功能方块阻挡
- **激光缩放、反射、合束时判定非常复杂，请在需要用到这些性质时自行测试**
  参见：[《变木试炼场 8：坚守阵地》通关视频](https://www.bilibili.com/video/BV1bA411H73Y)

::: details 以下是部分测试内容

- 无任何干扰时，激光的射程为 30 格，沿 `Z` 轴缩放时，该范围随之改变
- 光路发生反射，且反射点在 30 格以内时，激光总射程为 30 格，该范围**不随缩放改变**
- 光路发生反射，且反射点在 30 格以外时，会发生严重影响使用的 BUG。**请勿以此法使用**
- 两束激光相交时，若交点在两者的 30 格以内，会沿角平分线方向合成一束激光，推力和伤害与单束激光相同。三条光路总长为 60 格，该范围**不随缩放和反射改变**
- 两束激光相交时，若交点在至少一者的 30 格以外，不会合束，互不影响
- 同一束激光多次反射与自身相交时不会合束
- 合束激光可以与其它激光继续合束，当共有 n 个激光发射器参与时，所有光路总长为 30n 格
- 在激光合束后，各激光器剩余射程（与缩放有关）存在一条不显示的**幽灵激光**。幽灵激光的推力和伤害与单束激光相同，但不会反射或合束，会被任意物体截停

:::

## 激光门

`M_LaserLockedDoor`

在被激光照射时保持开启，在激光移除 2 秒后自动关闭。

Properties:

- Fixed object
- Will block the laser
- 激光门关闭时，门中的可动物体（包括玩家球）将被挤出门外。**请勿有意利用此性质**

## 激光摆

`M_LaserPushLong` `M_LaserPushShort`

Properties:

- Rigid body, can rotate along `Y` axis
- 其它参见[激光](#激光)

## 旋转激光

`M_LaserRotatingS*`

- Kinematics object, 自动绕 `Y` 轴顺时针转动
- `S1` `S2` `S3` 的转速分别为 25deg/s，50deg/s，100deg/s
- 其它参见[激光](#激光)

## 上锁门

`M_LockedDoor`

常称为钥匙门。

阻挡物体通过，可使用钥匙开启。

Properties:

- Fixed object
- Enter to trigger
- Will block the laser
- 其它参见[补给物](/en/glossary/extras.md#Supply)中的钥匙

## 磁球

`M_MagnetBall`

::: danger

该机关会与大量其它机关产生联动 BUG。除非清楚自己在做什么，请勿使用。

:::

磁球为深蓝色，以和钢球区别。可被磁铁和玩家钢球吸附。

Properties:

- Rigid body, can move freely
- Stay to trigger
- 不被道具钢球或各种钢质物品吸附
- 被玩家球吸附时提供推力。~~牛顿震怒~~
  参见：[《夜航星·飞升》通关视频](https://www.bilibili.com/video/BV1bK4y187RP?p=36&t=285) 4:45
  参见：[《奥丁挑战 16：星际迷航》通关视频](https://www.bilibili.com/video/BV1Uf4y1276K?t=10) 0:10
- 机关生效判定区为**半径约 7.5 格的球**，区域内任何机关都会与磁球产生互动。_例如：可被木风扇吹起，被传送带传送，被弹跳盒弹走，等等_
- 没事别用，没事别用，没事别用。Everything happens

## 钢琴

`M_Piano*`

- Fixed object
- Enter to trigger
- 音域按编号升序排列，覆盖大字一组到小字三组（C1~B6）
- 琴键没有冷却时间

## 活塞

`M_Pusher*`

Properties:

- Kinematics object, 自动沿 `Z` 方向平动，幅度为底座 `Z` 方向尺寸的一半，周期为 3 秒
- 对于相邻编号活塞，大编号相位超前小编号 60°
- 对于大尺寸的活塞，若玩家球或物体钻入圆靶下方，圆靶收回时将穿模至其上方。**请勿有意利用此性质**

## 栅栏

`M_PushTarget`

Properties:

- 底座为固定元件；推杆为刚体，可沿 `Z` 方向平动
- 除纸球外的所有球都能推动，其中冰球需要一定助跑距离
- 纸球、橡胶球、木球可以在不推开栅栏的情况下借助横杆绕过。**请勿有意利用此性质**
- 石球、发光球、钢球可以从边缘蹭开栅栏推杆并通过。**请勿有意利用此性质**
- 推杆不能拔出

## 旋转摆

`M_RotateTarget`

常称为单摆。~~虽然但是大家都这么叫~~

::: warning

Do not scale it.

:::

Properties:

- Rigid body, can rotate along `Y` axis
- 偏离初始位置时会产生恢复力，大小正比于偏离角度，但**不计算圈数**，即算得的偏离角度不大于 180°。_简单来说，不是发条_

## 沙袋

`M_SandBag`

::: warning

沙袋在地外场景无法正常工作，会沿随机方向摆动；在宇宙场景会静止。这两个场景中请谨慎使用沙袋。以下部分性质只对常规重力场景适用。

:::

Properties:

- Rigid body, 受吊绳约束
- 在 `yOz` 平面内自动摆动，周期约为 3.6 秒，`Z` 轴正向摆幅大于负向
- 可被玩家球或各种物体阻碍

## 落石

`M_StoneBlock`

由于 Ballance 中该机关模块名为 `P_Modul_34`，因此也称为 34。

Properties:

- Rigid body, 可沿 `Y` 方向平动
- 姿态任意，不必竖直；如果不水平，会在重力作用下沿 `Y` 方向下落
- **不配备垫材**，如有需要请自行添加木箱或道具球将其垫高

## 软木桥

`M_SuspensionBridge16` `M_SuspensionBridge8`

::: warning

Do not scale it.

:::

Properties:

- 各木板均为刚体，受绳索约束
- 受到足够大的力后会断裂。**（并非判断球种）**
- 常规重力场景中，纸球、冰球、橡胶球、木球可安全通过
- 地外场景中，上述四种球可安全通过，石球、发光球、钢球可慢速安全通过

## 吊盘

`M_SuspensionCircle`

::: warning

Do not scale it.

:::

Properties:

- Rigid body, 受吊绳约束。~~虽然我也不知道吊绳在哪~~
- 纸球可轻松通过
- 冰球、橡胶球、木球需要较高的技巧才能通过。**请勿以此法使用**
- 中心柱和顶部小环具有碰撞箱

## 旋转吊盘

`M_SuspensionCircleRotating`

::: danger

吊盘旋转速度没有上限，约 10 分钟后会失控，导致玩家球无法通过，因此请勿使用。

:::

Properties:

- Rigid body, 受吊绳约束
- 自动绕 `Y` 轴顺时针转动，可被玩家球或各种物体阻碍
- 其它参见[吊盘](#吊盘)

## T 板

`M_TBoardL` `M_TBoardS`

::: warning

Do not scale it.

:::

Properties:

- Rigid body, can rotate along `X` axis
- 小 T 板可被纸球外的所有球推倒
- 大 T 板可被石球、发光球、钢球推倒，也可能被橡胶球依靠弹力推倒
- 小 T 板倒下时，纸球、木球、橡胶球可以在推靶侧路宽为 1 的情况下进入主道，但难度很大。**请勿以此法使用**
  参见：[《奥丁新手挑战 2：翻过去》通关视频](https://www.bilibili.com/video/BV1U5411Y7w4?t=55) 0:55
- T 板倒下时，若推靶侧路宽大于 1，请注意玩家球高速冲入主道或推靶侧路的捷径。**请勿以此法使用**
  参见：[《双塔惊魄》通关视频](https://www.bilibili.com/video/BV13J411M7WS?t=1095) 18:15

## TNT

`M_TNT`

Properties:

- Rigid body, can move freely
- 爆炸冲击与体积成正比，引爆所需力与体积无关，与玩家球温度也无关。_由于惯性，TNT 越大，越容易引爆_
- 爆炸冲击中心为**底面中心**，作用半径约为 4 格，不随缩放而改变。**请勿有意利用此性质**
  参见：[《口语挑战 2：拥挤的单向门》通关视频](https://www.bilibili.com/video/BV1oo4y1f7HA?p=2)
- 火焰和满温度条玩家球会直接引爆 TNT
- 已经接触 TNT 的玩家球升温达到阈值或点燃时，不会因此引爆 TNT。**请勿有意利用此性质**
  参见：[《灼热深渊》通关视频](https://www.bilibili.com/video/BV1oo4y1f7HA?p=3)
- 激光**不会**引爆 TNT。_但是会提供推力，进而可能撞墙引爆。_**请勿有意利用此性质**

## 传送门

`M_TransferDoor`

传送门带有自身编号 `doorIndex` 和目标编号 `targetIndex` 两个参数，当物体进入传送门时，会从编号为 `targetIndex` 的门传出。

Properties:

- Fixed object
- 带冷却的进入时扳机
- 物体被传出时，会带有一定大小的速度，方向与出门方向一致
- 同一传送门对同一物体的冷却时间为 1 秒
- 玩家球进出传送门时，绝对视角不变
- Will block the laser
- 不会指示对应关系。**请自行添加文字或标志指示对应关系**
- 自身编号到目标编号不必构成单射或满射，也不必具有对称性
- 目标编号可以指向自身，会从自身传出
- 当目标编号无效时，传送门无法传入，但被指向时可以正常传出
- 当没有任何其它传送门指向时，传送门没有机会传出，但可以正常传入
- 同时满足上述两条时，传送门不工作，但仍然存在
- 当存在多个自身编号相同的传送门时，只有第一个添加的门为该编号；其它门丢失自身编号，没有机会传出，但可以正常传入

## 三棱柱

`M_TriPrismB1`

Properties:

- Rigid body, can rotate along `X` axis
- 三棱柱**没有底部支撑**，需要自行添加木板或其它元件确保其正常工作。**请勿有意利用此性质**
- 正向通过时，纸球、冰球、橡胶球、木球无法压动，石球、发光球、钢球可选是否压动
- 反向通过时，纸球无法压动，木球强制压动，其它球需助跑后才能通过且强制压动

## 倒板

`M_TurnBoard1`

::: warning

Do not scale it.

:::

Properties:

- Rigid body, can rotate along `X` axis
- 可被纸球外的所有球推倒，其中冰球需要一定助跑距离

## 两翼板

`M_TurnBoard2`

::: warning

Do not scale it.

:::

Properties:

- Rigid body, can rotate along `X` axis
- 可被纸球、冰球外的所有球推倒
- 板间横杆具有碰撞箱，可以通过横杆通往另一侧。**请勿有意利用此性质**

## 跷跷板

`M_TurnBoard3`

::: warning

Do not scale it.

:::

Properties:

- Rigid body, can rotate along `X` axis
- 跷跷板**没有底部支撑**，需要自行添加木板或其它元件确保其正常工作。**请勿有意利用此性质**
- 取决于摆放高度，不同玩家球与跷跷板的互动不同。通行的做法是：跷跷板高出周边路面 1 格，使得**纸球、冰球无法压动，橡胶球、木球可选是否压动，石球、发光球、钢球强制压动**

## 木桶

`M_WoodenVat`

Properties:

- Rigid body, can move freely
- 碰撞箱与其形状一致。_确实能滚_
